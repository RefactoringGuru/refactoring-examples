split-temporary-variable:java

###

1.ru. Найдите место в коде, где переменная первый раз заполняется каким-то значением. В этом месте переименуйте переменную и дайте ей название, соответствующее присваиваемому значению.
1.uk. Знайдіть місце в коді, де змінна перший раз заповнюється якимось значенням. У цьому місці перейменуйте змінну і дайте їй назву, відповідну до значення,що призначується.

2.ru. Подставьте её новое название вместо старого в тех местах, где использовалось это значение переменной.
2.uk. Підставте її нову назву замість старого в місцях, де використовувалося це значення змінної.

3.ru. Повторите операцию для случаев, где переменной присваивается новое значение.
3.uk. Повторіть операцію для інших випадків, де змінній привласнюється нове значення.



###

```
public double getDistanceTravelled(int time) {
  double result;
  double acc = primaryForce / mass;
  int primaryTime = Math.min(time, delay);
  result = 0.5 * acc * primaryTime * primaryTime;

  int secondaryTime = time - delay;
  if (secondaryTime > 0) {
    double primaryVel = acc * delay;
    acc = (primaryForce + secondaryForce) / mass;
    result +=  primaryVel * secondaryTime + 0.5 * acc * secondaryTime * secondaryTime;
  }
  return result;
}
```

###

```
public double getDistanceTravelled(int time) {
  double result;
  final double primaryAcceleration = primaryForce / mass;
  int primaryTime = Math.min(time, delay);
  result = 0.5 * primaryAcceleration * primaryTime * primaryTime;

  int secondaryTime = time - delay;
  if (secondaryTime > 0) {
    double primaryVel = primaryAcceleration * delay;
    final double secondaryAcceleration = (primaryForce + secondaryForce) / mass;
    result +=  primaryVel * secondaryTime + 0.5 * secondaryAcceleration * secondaryTime * secondaryTime;
  }
  return result;
}
```

###

Set step 1

#|ru| Давайте рассмотрим <i>Расщепление переменной</i> на примере небольшого метода расчёта расстояния перемещения мяча в пространстве в зависимости от времени и сил, действующих на него.
#|uk| Давайте розглянемо <i>Розщеплення змінної<i> на прикладі невеличкого методу розрахунку відстані переміщення м'яча в просторі залежно від часу і сил, що діють на нього.

Select "|||acc||| ="

#|ru|^ Для нашего примера представляет интерес то, что переменная <code>acc</code> устанавливается в нём дважды.
#|uk|^ Для нашого прикладу становить цікавість те, що змінна <code>acc</code> встановлюється в ньому двічі.

#|ru|+ Она выполняет две задачи: содержит первоначальное ускорение, вызванное первой силой...
#|uk|+ Вона виконує два завдання: містить початкове прискорення, викликане першою силою...

#|ru|^= ...и позднее ускорение, вызванное обеими силами.
#|uk|^= ...і пізніше прискорення, викликане обома силами.

#|ru|^ Следовательно, эту переменную лучше расщепить, чтобы каждая её часть отвечала только за одну задачу.
#|uk|^ Отже, цю змінну краще розщепити, щоб кожна її частина відповідала тільки за одну задачу.

Select "double |||acc|||"

#|ru| Начнём с изменения имени переменной. Для этого очень удобно выбрать имя, которое будет отражать её первое применение.
#|uk| Почнемо з замніни ім'я для змінної. Для цього дуже зручно вибрати ім'я, яке буде відтворювати її перше застосування.

Print "primaryAcceleration"

Go to "|||double primaryAcceleration"

#|ru| Кроме того, мы объявляем её как <code>final</code>, чтобы гарантировать однократное присваивание ей значения.
#|uk| Крім того, ми оголошуємо його як <code>final</code>, щоб гарантувати однократне присвоювання йому значення.

Print "final "

Set step 2

Select "result = 0.5 * |||acc|||"
+ Select "|||acc||| * delay"

#|ru| После этого нужно переименовать переменную во всех местах, где она использовалась, вплоть до того места, где ей присваивается новое значение.
#|uk| Після цього потрібно перейменувати змінну у всіх місцях, де вона використовувалася, аж до того місця, де їй присвоюється нове значення.

Print "primaryAcceleration"

Go to "|||acc ="

#|ru| После всех замен можно объявить первоначальную переменную в месте второго присваивания ей некоторого значения.
#|uk| Після всіх замін можна оголосити первісну змінну в місці другого присвоювання їй деякого значення.

Print "double "

#C|ru| После того как мы добрались до второго случая использования переменной, можно выполнить компиляцию и тестирование.
#S Все отлично, можно продолжать.

#C|uk| Після того як ми дісталися до другого випадку використання змінної, можна виконати компіляцію і тестування.
#S Все добре, можна продовжувати.

Set step 3

Select 1st "|||acc||| "

#|ru| Теперь можно повторить все действия со вторым присваиванием временной переменной. Окончательно удаляем первоначальное имя переменной, и заменяем его новым, соответствующим второй задаче.
#|uk| Тепер можна повторити всі дії з другим присвоюванням тимчасової змінної. Остаточно видаляємо первинне ім'я змінної, і замінюємо його новим, відповідним другому завданню.

Print "secondaryAcceleration"

Wait 500ms

Go to "|||double secondaryAcceleration"

Print "final "

Wait 500ms

Select " |||acc||| "

Replace "secondaryAcceleration"

#C|ru| Запускаем финальную компиляцию.
#S Отлично, все работает!

#C|uk| Запускаємо фінальну компіляцію.
#S Супер, все працює.

Set final step

#|ru|Q На этом рефакторинг можно считать оконченным. В завершение, можете посмотреть разницу между старым и новым кодом.
#|uk|Q На цьому рефакторинг можна вважати закінченим. На завершення, можете подивитися різницю між старим та новим кодом.